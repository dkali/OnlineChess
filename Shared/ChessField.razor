@using OnlineChess.Data
@inject LobbyService lobbyService
@inject PlayerDataService playerDataService

<div class="chess-field">
    <div class="grid-container">
        @for (int rowIndex = 0; rowIndex < 10; rowIndex++)
        {
            @for (int cellIndex = 0; cellIndex < 10; cellIndex++)
            {
                <Cell RowIndex="@rowIndex"
                    CellIndex="@cellIndex"
                    Field="@Field" />
            }
        }
    </div>
</div>

@code
{
    public FieldData Field { get; set; }
    private string SessionId { get; set; }
    protected override void OnInitialized()
    {
        SessionId = lobbyService.GetSessionId(playerDataService.accountId);
        Field = lobbyService.GetSessionField(SessionId);
    }

    public void ReRender()
    {
        StateHasChanged();
    }
}